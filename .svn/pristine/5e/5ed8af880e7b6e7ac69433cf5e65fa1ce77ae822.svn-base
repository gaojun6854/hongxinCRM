<%@page import="java.util.UUID"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>产品购买页面</title>
<script src="../js/jquery.js" type="text/javascript"></script>
		<script src="../js/jquery.carouFredSel-6.0.4-packed.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(function() {
				var _visible = 5;
				var $pagers = $('#pager a');
				var _onBefore = function() {
					$(this).find('img').stop().fadeTo( 300, 1 );
					$pagers.removeClass( 'selected' );
				};

				$('#carousel').carouFredSel({
					items: _visible,
					width: '100%',
					auto: false,
					scroll: {
						duration: 750
					},
					prev: {
						button: '#prev',
						items: 2,
						onBefore: _onBefore
					},
					next: {
						button: '#next',
						items: 2,
						onBefore: _onBefore
					},
				});

				$pagers.click(function( e ) {
					e.preventDefault();
					
					var group = $(this).attr( 'href' ).slice( 1 );
					var slides = $('#carousel div.' + group);
					var deviation = Math.floor( ( _visible - slides.length ) / 2 );
					if ( deviation < 0 ) {
						deviation = 0;
					}

					$('#carousel').trigger( 'slideTo', [ $('#' + group), -deviation ] );
					$('#carousel div img').stop().fadeTo( 300, 0.3 );
					slides.find('img').stop().fadeTo( 300, 1 );

					$(this).addClass( 'selected' );
				});
			});
			
		function shopping(id,product_id,product_name){
			$("#custid").val(id);
			$("#productid").val(product_id);
			$("#span1").html(product_name);
		}
		function aa(){
			window.open( '../uploadify/fileupclose.jsp','_blank','width=700,height=500,toolbars=yes,resizable=yes,scrollbars=yes,left=50%,top=50%');
			return false;
		}
			
		</script>
		<style type="text/css">
			html, body {
				height: 100%;
				padding: 0;
				margin: 0;
			}
			body {
				background-color: #fff;
				min-height: 400px;
			}
			body * {
				font-family: Arial, Geneva, SunSans-Regular, sans-serif;
				font-size: 14px;
				color: #333;
				line-height: 22px;
			}
			body h3 {
				font-size: 20px;
				margin: 30px 0 10px 0;
			}
			body a:hover {
				color: #000;
			}

			#wrapper {
				background-color: #ccc;
				width: 100%;
				height: 55%;
				min-height: 275px;
				margin: -150px 0 0 0;
				position: absolute;
				bottom: 0;
				left: 0;
			}
			#inner {
				width: 100%;
				height: 300px;
				margin-top: -75px;
				position: relative;
				overflow: hidden;
			}
			#carousel div {
				border: 1px solid #999;
				background: #fff;
				width: 140px;
				height: 330px;
				float: left;
				padding: 10px;
				margin: 0 5px;
			}
			#pager {
				text-align: center;
				margin-top: 20px;
				color: #666;
			}
			#pager a {
				color: #666;
				text-decoration: none;
				display: inline-block;
				padding: 5px 10px;
			}
			#pager a:hover {
				color: #333;
			}
			#pager a.selected {
				background-color: #333;
				color: #ccc;
			}
			#prev, #next {
				display: block;
				width: 50px;
				height: 80px;
				margin-top: -40px;
				position: absolute;
				top: 50%;
				z-index: 2;
			}
			#prev {
				background: url( ../images/pact/ui-prev.png ) no-repeat;
				left: 50%;
				margin-left: -520px;
			}
			#next {
				background: url( ../images/pact/ui-next.png ) no-repeat;
				right: 50%;
				margin-right: -520px;
			}
			#copy {
				text-align: center;
				width: 100%;
				position: absolute;
				bottom: 10px;
				left: 0;
			}
			#copy, #copy a {
				color: #999;
			}
			
			#donate-spacer {
				height: 100%;
			}
			#donate {
				width: 750px;
				padding: 50px 75px;
				margin: 0 auto;
				overflow: hidden;
			}
			#donate p, #donate form {
				margin: 0;
				float: left;
			}
			#donate p {
				width: 650px;
			}
			#donate form {
				width: 100px;
			}
		</style>
	</head>
	<body>
	已选产品<span id="span1" style="color: red"></span>
	<span style="color: red; font-size: 15px;">${requestScope.flag}<br /></span>
				<div id="carousel">
					<c:forEach items="${products}" var="product">
						<div class="jeans" id="jeans" onclick="javascript:shopping('${requestScope.custId}','${product.productId}','${product.productName}')">
								产品名称<span>${product.productName}</span><br/>
								产品描述<span>${product.productDesc}</span><br/>
								融资方公司名<span>${product.companyName}</span><br/>
								融资方公司代码<span>${product.companyCode}</span><br/>
								融资方公司银行账号<span>${product.bankAccout}</span><br/>
								融资方公司富有账号<span>${product.fuyouAccout}</span><br/>
								产品类型<span>${product.productType}</span><br/>
						</div>
					</c:forEach>
				</div>
				<a href="#" id="prev" style="background-color: green;"></a>
				<a href="#" id="next" style="background-color: green;"></a>
			<form action="pactInfo!addPactInfo.action" method="post" style="margin-left: 40%;">
			<%String pactId=UUID.randomUUID().toString();
				session.setAttribute("custIDS", pactId);
				session.setAttribute("picType", 2);
			%>
			<input type="button" onclick="javascript:aa()" value="上传图片"><span id="pic" style="color: red"></span><br/>
	<input type="hidden" id="custid" name="pactInfo.custId">
	<input type="hidden" id="productid" name="pactInfo.productId">
	请输入合同编号：<input type="text" id="pactNo" name="pactInfo.amount"><br/>
	请输入再投金额：<input type="text" id="productid" name="pactInfo.contractNumber"><br/>
	<input type="submit" value="购买">
</form>
	</body>
</html>
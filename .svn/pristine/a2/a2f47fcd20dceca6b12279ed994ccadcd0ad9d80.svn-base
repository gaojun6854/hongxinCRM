package com.hongxin.action.OA;
import java.util.List;

/**
 * 客户信息
 */
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import javax.websocket.Session;
import org.apache.struts2.ServletActionContext;
import org.apache.struts2.interceptor.ServletRequestAware;
import org.springframework.beans.factory.annotation.Autowired;
import com.hongxin.entity.CheckReceipts;
import com.hongxin.entity.CustomAccount;
import com.hongxin.entity.CustomBaseInfo;
import com.hongxin.entity.Picture;
import com.hongxin.service.CheckInfoService;
import com.hongxin.service.CustomAccountService;
import com.hongxin.service.CustomBaseInfoService;
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;
@SuppressWarnings("unused")
public class CheckInfoAction extends ActionSupport implements ServletRequestAware{
    private HttpServletRequest request;  
	private static final long serialVersionUID = 1L;
	@Autowired
	private CheckInfoService checkInfoService;
	private List<Picture> picList;
	
	@Override
	public String execute() throws Exception {
		//保存刚录取的用户信息置session方便事物
		HttpSession session=ServletActionContext.getRequest().getSession();
		String custIDS=(String) request.getParameter("param");
		
		CustomBaseInfo toAddCustomBaseInfo=(CustomBaseInfo)request.getSession().getAttribute("toAddCustomBaseInfo");//得到用户基础信息
		toAddCustomBaseInfo.setId(custIDS);
		CustomAccount toAddCustomAccount=(CustomAccount)request.getSession().getAttribute("toAddCustomAccount");//得到用户基础信息
		int a=checkInfoService.createCustomInfos(toAddCustomBaseInfo,toAddCustomAccount);
		if(a==1){}
		request.setAttribute("flag", "客户:"+toAddCustomBaseInfo.getCustname()+"信息添加成功");
		return SUCCESS;
	}

	public HttpServletRequest getRequest() {
		return request;
	}
	public void setRequest(HttpServletRequest request) {
		this.request = request;
	}

	public void setServletRequest(HttpServletRequest req) {
		this.request=req; 
		
	}

	public List<Picture> getPicList() {
		return picList;
	}

	public void setPicList(List<Picture> picList) {
		this.picList = picList;
	}
	
}
